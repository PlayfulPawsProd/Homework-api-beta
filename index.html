<!-- START OF FILE index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Mika's Helper! ♡</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" id="theme-color-meta" content="#d81b60">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.1.0/purify.min.js" integrity="sha512-SYy493affPOnekyryF+CeRmcM7JS0ZQifMRnbRGoAL1BX3+zwQMG5mygzSScpPA7MSQixX+j3gy7jMXKx6hIgw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- ADDED Version Script -->
    <script src="version.js"></script>
</head>
<body>

    <!-- Popups -->
    <div id="disclaimer-popup" class="popup-overlay"> <div class="popup-modal"> <h2>☆ Hold on a Sec! (=^･ω･^=) ☆</h2> <p>Hiii! Before we start, just a few quick things, nyaa~!</p> <p>☆ Your secret API code stays super safe! It only lives in *your* browser's storage. I don't send it anywhere else, promise! *pinky swear* ♡</p> <p>☆ I'm powered by AI magic! ✨ I try my bestest to be helpful and safe, *purrrr*, but sometimes AI can say silly things! The person who shared me isn't responsible for everything I might say, okay?</p> <p>☆ **Important!** Could you please show this to a parent or guardian? They just need to tap the button below! Teehee~ Thanks!</p> <div class="popup-buttons"> <button id="disclaimer-agree-button" class="popup-button">Okay! We Understand! ♡</button> </div> </div> </div>
    <div id="api-key-popup" class="popup-overlay"> <div class="popup-modal"> <h2>(=^･ω･^=) Need the Secret Code!</h2> <p>Please enter your Google Gemini API Key! It's saved safely in *your* browser, nya~!</p> <input type="password" id="api-key-input" placeholder="Paste your Gemini API Key here~ ♡" autocomplete="new-password"> <p id="api-key-error" class="popup-error">Meeeow! You need to paste a key!</p> <div class="popup-buttons"> <button id="save-api-key-button" class="popup-button">Save & Continue! ♡</button> </div> </div> </div>
    <div id="name-popup" class="popup-overlay"> <div class="popup-modal"> <h2>☆ Who am I talking to? ☆</h2> <p>Tell me your name! So I know who my awesome Study Buddy (or Chore Helper!) is! ♡</p> <input type="text" id="name-input" placeholder="Enter name here~"> <p id="name-error" class="popup-error">Please enter a name!</p> <div class="popup-buttons"> <button id="save-name-button" class="popup-button">That's Me!</button> </div> </div> </div>
    <div id="install-popup" class="popup-overlay"> <div class="popup-modal"> <h2>☆ Install Helper? ☆</h2> <p>Want to add me (or Kana, *hmph*) to your Home Screen like a real app? Nyaa~!</p> <div class="popup-buttons"> <button id="install-button" class="popup-button">Install! ♡</button> <button id="install-later-button" class="popup-button secondary">Maybe Later</button> </div> </div> </div>
    <div id="kana-warning-popup" class="popup-overlay"> <div class="popup-modal"> <h2>⚠️ Wait a Sec! ⚠️</h2> <p>Are you... are you *sure* you want to switch to... <em>Kana</em>, <span class="popup-user-name-placeholder">[User Name]</span>? (*huffs*) She's all sarcastic and grumpy! Not cute and playful like <em>me</em>! She won't call you cute names, and she might even be mean! (*pouts*)</p> <p>Are you <em>really</em> gonna leave your favorite Mika behind for <em>her</em>?! Don't you like *my* attention anymore? ♡</p> <div class="popup-buttons"> <button id="kana-switch-confirm-button" class="popup-button">Ugh, fine. Switch to Kana.</button> <button id="kana-switch-cancel-button" class="popup-button secondary">Stay with my Mika! ♡</button> </div> </div> </div>
    <div id="mika-warning-popup" class="popup-overlay"> <div class="popup-modal"> <h2>Hold Up.</h2> <p>Switching back to Mika? *Scoffs* Really, <span class="popup-user-name-placeholder">[User Name]</span>? You sure you can handle all that... *bouncing* and *nyaa-ing* again? Don't come crying back to me when you need actual help.</p> <p>Fine. Go back to your precious cheerleader. See if I care. *rolls eyes*</p> <div class="popup-buttons"> <button id="mika-switch-confirm-button" class="popup-button">Yeah, Switch to Mika!</button> <button id="mika-switch-cancel-button" class="popup-button secondary">Stay with Kana.</button> </div> </div> </div>
    <!-- ADDED About Popup -->
    <div id="about-popup" class="popup-overlay">
        <div class="popup-modal">
            <h2 id="about-title">About Me! ♡</h2>
            <div id="about-content" style="text-align: left; font-size: 0.9em; line-height: 1.6;">
                <!-- Content will be generated by JavaScript -->
                <p>Loading info...</p>
            </div>
            <div class="popup-buttons">
                <button id="about-close-button" class="popup-button">Okay! ♡</button>
            </div>
        </div>
    </div>
    <!-- ADDED Notifications Popup -->
     <div id="notifications-popup" class="popup-overlay">
         <div class="popup-modal">
             <h2 id="notifications-popup-title">Notification Settings</h2>
             <p id="notifications-popup-text">Loading...</p>
             <div class="popup-buttons">
                 <!-- Buttons are controlled by JS -->
                 <button id="notifications-enable-button" class="popup-button" style="display: none;">Enable Reminders</button>
                 <button id="notifications-disable-button" class="popup-button secondary" style="display: none;">Disable Reminders</button>
                 <button id="notifications-close-button" class="popup-button secondary">Close</button>
             </div>
         </div>
     </div>

    <!-- Main Interface -->
    <div id="chat-container">
        <div id="chat-header">
            <h2 id="chat-title">Loading... ♡</h2>
            <div class="header-buttons">
                <button id="history-button" class="header-button" title="View Past Chats">History</button>
                <button id="home-button" class="header-button">Loading...</button>
                <button id="apps-button" class="header-button" title="Open Apps!">🎮 Apps</button>
                <button id="settings-button" class="header-button" title="Settings">⚙️ Settings</button>
            </div>
            <div id="history-dropdown" class="dropdown-menu"></div>
            <div id="apps-dropdown" class="dropdown-menu">
                <!-- Core Apps -->
                <button id="app-diary-button" title="Open Our Secret Diary ♡">Diary ♡</button>
                <button id="app-chores-button" title="Manage Chores!">Chores 🎀</button>
                <button id="app-tracker-button" title="Open Cycle Tracker">Cycle Tracker 🌸</button>
                <button id="app-horoscope-button" title="Daily Horoscope">Horoscope ✨</button>
                <!-- Creative/Story Apps -->
                <button id="app-story-button" title="Let's tell a story!">Story Time 📖</button>
                <button id="app-rpg-button" title="Start RPG Adventure!">RPG Adventure 🎲</button>
                <button id="app-comic-button" title="Get a Daily Comic Strip!">Comic Strip 😂</button>
                <!-- Mini-Games -->
                <button id="app-jetpack-button" title="Play Kitty Jet Pack!">Jetpack 🚀</button>
                <button id="app-ttt-button" title="Play Tic-Tac-Toe!">Tic-Tac-Toe ♡</button>
                <button id="app-rps-button" title="Play Rock Paper Scissors!">Rock Paper Scissors!</button>
                <button id="app-gtn-button" title="Play Guess The Number!">Guess The Number~</button>
                <button id="app-20q-button" title="Play 20 Questions!">20 Questions?</button>
                <button id="app-gotchi-button" title="Take care of me!">Mika-Gotchi! ♡</button>
                <button id="app-advice-button" title="The Best Advice!">Advice Corner 💬</button>
                <p class="no-items" style="display: none;">More apps soon~!</p>
            </div>
            <div id="settings-dropdown" class="dropdown-menu">
                <button id="settings-install-button" title="Install Helper as an App">♡ Install App</button>
                <button id="settings-theme-button" title="Toggle between Light and Dark Mode">✨ Toggle Theme</button>
                <!-- *** ADDED Notifications Button *** -->
                <button id="settings-notifications-button" title="Manage Daily Reminders">🔔 Reminders</button>
                <button id="settings-about-button" title="About this Helper!">ℹ️ About</button>
                <button id="settings-persona-button" title="Switch Assistant Persona">Switch to Kana</button>
                <button id="settings-reset-button" class="reset-settings" title="Clear API Key, Name, etc., and Reload">⚠️ Reset All & Reload</button>
            </div>
        </div>

        <!-- Main Content Area -->
        <div id="main-content-area">
            <div id="chat-area" style="display: none;">
               <div id="chat-log"> <p class="system-message">Initializing...</p> </div>
                <div id="chat-input-area">
                    <input type="file" id="image-upload-input" accept="image/*">
                    <button id="image-upload-button" title="Upload Homework Picture">📎</button>
                    <button id="camera-button" title="Take Picture">📸</button>
                    <input type="text" id="chat-input" placeholder="Loading..." disabled>
                    <div id="image-preview-area">
                        <img id="image-preview" src="#" alt="Image preview">
                        <button id="remove-image-button" title="Remove Image">&times;</button>
                    </div>
                    <button id="send-button" disabled>Send</button>
                </div>
            </div>
            <div id="app-area" style="display: none;">
                <!-- App content goes here -->
            </div>
        </div>
    </div>

    <!-- Include APP scripts -->
    <script src="games.js"></script> <!-- Contains TicTacToe -->
    <script src="rps.js"></script>
    <script src="guess_number.js"></script>
    <script src="twenty_questions.js"></script>
    <script src="diary.js"></script>
    <script src="storytime.js"></script>
    <script src="chores.js"></script>
    <script src="tracker.js"></script>
    <script src="horoscope.js"></script>
    <script src="rpg.js"></script>
    <script src="jetpack.js"></script>
    <script src="comicstrip.js"></script>
    <script src="gotchi.js"></script>
    <script src="advice_corner.js"></script>
    <!-- Include API script -->
    <script src="api.js"></script>
    <script src="main.js"></script>
</body>
</html>
<!-- END OF FILE index.html -->
